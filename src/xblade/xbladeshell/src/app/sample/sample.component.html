<div class="sample-container">
  <div class="header">
    <h1>UI Controls Demo</h1>
    <p>Live interactive demos of all supported UI controls loaded from elements.json via API call.</p>
    <button (click)="loadElements()" class="refresh-btn" [disabled]="loading">
      {{ loading ? 'Loading...' : 'Refresh Controls' }}
    </button>
  </div>

  <!-- Loading state -->
  <div *ngIf="loading" class="loading">
    <div class="spinner"></div>
    <p>Loading controls...</p>
  </div>

  <!-- Error state -->
  <div *ngIf="error" class="error">
    <h3>Error</h3>
    <p>{{ error }}</p>
    <button (click)="loadElements()" class="retry-btn">Retry</button>
  </div>

  <!-- Controls demo -->
  <div *ngIf="!loading && !error && elements.length > 0" class="demo-container">
    <!-- Summary -->
    <div class="summary">
      <h2>Demo Overview</h2>
      <p><strong>Total Controls:</strong> {{ elements.length }}</p>
      <p><strong>Categories:</strong> {{ getCategoryNames().length }}</p>
      <p><strong>Interactive:</strong> Try out each control below to see how they work!</p>
    </div>

    <!-- Demo Controls by Category -->
    <div class="categories">
      <div *ngFor="let category of getCategoryNames()" class="category-section">
        <h2 class="category-title">{{ category | titlecase }} Controls</h2>
        <div class="controls-grid">
          <div *ngFor="let element of getElementsByCategory(category); let i = index" class="control-card">
            <div class="control-header">
              <h3>{{ element.displayName }}</h3>
              <span class="control-type-badge">{{ element.type }}</span>
            </div>
            <p class="control-description">{{ element.description }}</p>
            
            <!-- Live Demo -->
            <div class="control-demo-area">
              <h5>Live Demo:</h5>
              <app-demo-control-renderer 
                [element]="element" 
                [index]="i">
              </app-demo-control-renderer>
            </div>

            <!-- Properties Reference -->
            <div class="control-properties">
              <h5>Available Properties:</h5>
              <div class="properties-list">
                <span *ngFor="let prop of getPropertyNames(element)" class="property-tag">
                  <strong>{{ prop }}</strong>: {{ element.properties[prop] }}
                </span>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Demo Section -->
    <div class="quick-demo-section">
      <h2>Quick Demo - All Controls</h2>
      <p>See all interactive controls in one place:</p>
      <div class="quick-demo-grid">
        <div *ngFor="let element of elements.slice(0, 12); let i = index" class="quick-demo-item">
          <h6>{{ element.displayName }}</h6>
          <app-demo-control-renderer 
            [element]="element" 
            [index]="i + 100">
          </app-demo-control-renderer>
        </div>
      </div>
    </div>
  </div>

  <!-- Empty state -->
  <div *ngIf="!loading && !error && elements.length === 0" class="empty-state">
    <h3>No Controls Found</h3>
    <p>The controls file appears to be empty or could not be loaded.</p>
    <button (click)="loadElements()" class="retry-btn">Try Again</button>
  </div>
</div>